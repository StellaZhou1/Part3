(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t.n(r),o=t(14),i=t.n(o),s=(t(19),t(3)),u=t(4),a=t.n(u),d="/api/persons",l=function(){return a.a.get(d).then((function(e){return e.data}))},b=function(e){return a.a.post(d,e).then((function(e){return e.data}))},j=function(e){return a.a.delete("".concat(d,"/").concat(e.id)).then((function(e){return e.data}))},f=function(e,n){return a.a.put("".concat(d,"/").concat(e.id),n).then((function(e){return e.data}))},h=t(0),m=function(e){var n=e.message,t=e.success;return null===n?null:t?Object(h.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n}):Object(h.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},O=function(e){var n=e.newFilter,t=e.setNewFilter;return Object(h.jsx)("input",{value:n,onChange:function(e){t(e.target.value)}})},g=function(e){var n=e.persons,t=(e.newPerson,e.newName),r=e.newNumber,c=e.setPersons,o=e.setNewName,i=e.setNewNumber,s=e.setMessage,u=e.setSuccess;return Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a=n.find((function(e){return e.name===t})),d={name:t,number:r};a?window.confirm(t+" is already added to phonebook, replace the old number with a new one?")&&f(a,d).then((function(e){c(n.map((function(n){return e.id!==n.id?n:e}))),o(""),i(""),s("Changed "+e.name),u(!0),setTimeout((function(){s(null)}),5e3)})).catch((function(e){u(!1),s(e.response.data.error),setTimeout((function(){s(null)}),5e3)})):b(d).then((function(e){c(n.concat(e)),o(""),i(""),s("Added "+e.name),u(!0),setTimeout((function(){s(null)}),5e3)})).catch((function(e){u(!1),s(e.response.data.error),setTimeout((function(){s(null)}),5e3)}))},children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:t,onChange:function(e){o(e.target.value)}})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{value:r,onChange:function(e){i(e.target.value)}})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.persons,t=e.newFilter,r=e.setPersons,c=n.filter((function(e){return e.name.toLowerCase().indexOf(t.toLowerCase())>=0}));return Object(h.jsx)("div",{children:c.map((function(e){return Object(h.jsxs)("div",{children:["name: ",e.name," number: ",e.number,Object(h.jsx)("button",{type:"button",onClick:function(){return function(e,n,t){window.confirm("Delete ".concat(e.name,"?"))?j(e).then((function(r){t(n.filter((function(n){return n.id!==e.id})))})):console.log("cancel")}(e,n,r)},children:"delete"})]},e.name)}))})},w=function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),i=Object(s.a)(o,2),u=i[0],a=i[1],d=Object(r.useState)(""),b=Object(s.a)(d,2),j=b[0],f=b[1],w=Object(r.useState)(""),x=Object(s.a)(w,2),v=x[0],N=x[1],S=Object(r.useState)(""),y=Object(s.a)(S,2),C=y[0],F=y[1],k=Object(r.useState)(!0),P=Object(s.a)(k,2),T=P[0],B=P[1];return Object(r.useEffect)((function(){l().then((function(e){return c(e)}))}),[]),Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(m,{message:C,success:T}),Object(h.jsxs)("div",{children:["filter shown with",Object(h.jsx)(O,{newFilter:v,setNewFilter:N})]}),Object(h.jsx)("h2",{children:"add a new"}),Object(h.jsx)(g,{persons:t,newName:u,newNumber:j,setPersons:c,setNewName:a,setNewNumber:f,setMessage:F,setSuccess:B}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(p,{persons:t,newFilter:v,setPersons:c})]})},x=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,40)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,o=n.getLCP,i=n.getTTFB;t(e),r(e),c(e),o(e),i(e)}))};i.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(w,{})}),document.getElementById("root")),x()}},[[39,1,2]]]);
//# sourceMappingURL=main.238bb6ed.chunk.js.map